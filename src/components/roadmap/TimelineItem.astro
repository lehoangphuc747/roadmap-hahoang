---
interface Props {
    id: number;
    date: string;
    status: "completed" | "today" | "upcoming" | "holiday";
    content?: string[];
}

const { id, date, status, content } = Astro.props;

// Date formatting
const dateObj = new Date(date);
const dayStr = new Intl.DateTimeFormat("vi-VN", {
    day: "2-digit",
    month: "2-digit",
}).format(dateObj);
const weekDay = new Intl.DateTimeFormat("vi-VN", { weekday: "short" }).format(
    dateObj,
);

const isHoliday = status === "holiday";
---

{
    isHoliday ? (
        <div class="p-4 mb-3 rounded-xl bg-red-50 border border-red-200 flex items-center justify-between shadow-sm relative overflow-hidden group">
            <div class="absolute -right-6 -top-6 w-20 h-20 bg-red-100 rounded-full blur-xl opacity-50" />
            <div class="flex items-center gap-4 relative z-10">
                <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center text-xl shadow-inner border border-red-200">
                    üßß
                </div>
                <div>
                    <span class="block text-sm font-bold text-red-800 font-heading uppercase tracking-wider">
                        Ngh·ªâ T·∫øt
                    </span>
                    <span class="text-xs text-red-600 font-medium">
                        Ch√∫c M·ª´ng NƒÉm M·ªõi 2026!
                    </span>
                </div>
            </div>
            <div class="text-2xl opacity-80 z-10">üå∏</div>
        </div>
    ) : (
        <div
            class={`p-4 mb-3 rounded-xl border border-l-4 border-r-4 transition-all duration-300 group relative
        ${
            status === "today"
                ? "bg-white border-indigo-500 shadow-xl shadow-indigo-500/10 scale-[1.02] ring-1 ring-indigo-500 z-10"
                : "bg-white border-slate-200 shadow-sm hover:shadow-lg hover:shadow-indigo-500/5 hover:-translate-y-0.5 hover:border-indigo-200 z-0"
        } ${status === "completed" ? "bg-slate-50 border-slate-200/60 !opacity-75 hover:!opacity-100 hover:!bg-white hover:shadow-md" : ""}`}
        >
            <div class="flex justify-between items-start mb-2">
                <div class="flex items-center gap-2">
                    <span
                        class={`text-sm font-bold w-16 px-2 py-1 rounded text-center shadow-sm
                    ${
                        status === "today"
                            ? "bg-indigo-600 text-white shadow-indigo-200"
                            : status === "completed"
                              ? "bg-slate-200 text-slate-500"
                              : "bg-slate-100 text-slate-600"
                    }`}
                    >
                        {dayStr}
                    </span>
                    <span class="text-xs font-bold text-slate-500 uppercase">
                        {weekDay}
                    </span>
                </div>

                <div class="text-right">
                    <span
                        class={`text-xs font-bold px-2 py-1 rounded-full
                     ${
                         status === "today"
                             ? "text-primary bg-primary/10"
                             : status === "completed"
                               ? "text-emerald-600 bg-emerald-50"
                               : "text-slate-500 bg-slate-100"
                     }`}
                    >
                        Bu·ªïi {id}
                    </span>
                </div>
            </div>

            {content && content.length > 0 && (
                <ul class="space-y-1 mt-3 pl-1 mb-4">
                    {content.map((item) => (
                        <li class="text-sm text-slate-600 flex items-start gap-2">
                            <span class="text-primary/60 mt-1.5 text-[8px]">
                                ‚óè
                            </span>
                            <span>{item}</span>
                        </li>
                    ))}
                </ul>
            )}

            {/* Special Action for Session 20 */}
            {id === 20 && (
                <a
                    href="/bai-tap/buoi-20"
                    class="block w-full py-2 bg-indigo-50 hover:bg-indigo-100 text-primary text-center rounded-lg font-bold text-sm transition-colors mb-3 border border-indigo-100"
                >
                    üìù L√†m b√†i t·∫≠p (44 c√¢u)
                </a>
            )}

            {status === "today" && (
                <div class="mt-3 pt-3 border-t border-slate-100 flex items-center justify-between text-xs">
                    <span class="flex items-center gap-1 text-primary font-bold">
                        <span class="w-1.5 h-1.5 rounded-full bg-primary animate-pulse" />
                        20:30 H√¥m nay
                    </span>
                    <span class="text-slate-400">Google Meet</span>
                </div>
            )}
        </div>
    )
}
